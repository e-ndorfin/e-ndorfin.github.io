---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import FormattedDate from '../../components/FormattedDate.astro';

const posts = (await getCollection('blog'))
    .filter((post) => !post.data.draft)
    .sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blog">
	<section class="mt-8">
        <h1 class="text-3xl font-bold text-white mb-8">Rabbitholes</h1>
		<ul class="space-y-6">
			{posts.map((post) => (
				<li class="group">
                    <a href={`/rabbitholes/${post.id}/`} class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between no-underline">
                        <h2 class="text-lg text-theme-text group-hover:text-theme-accent transition-colors">
                            {post.data.title}
                        </h2>
                        <span class="text-sm text-gray-500 font-mono mt-1 sm:mt-0 whitespace-nowrap sm:ml-4">
                            <FormattedDate date={post.data.pubDate} />
                        </span>
                    </a>
				</li>
			))}
		</ul>
	</section>
</Layout>
